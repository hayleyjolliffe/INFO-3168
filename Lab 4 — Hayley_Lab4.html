 <html>
	<head>
		<title>Lab 4</title>
		<script language="JavaScript" type="text/JavaScript">
		
		let timers = [];
		
		let log = (function (outputFunc) {
			let counter = 0;
			let callerLog = [];
			let dateTime = [];
			
			// return inner anonymous function
			return function(caller) {
                // counter increment
                counter++;

                // add caller to log array
                callerLog.push(caller);

                // add current datetime to datetime array
                dateTime.push(new Date);

                // creating output
                let output = counter + " " + callerLog[counter -1 ] + " " + dateTime[counter - 1];
                
                // calling outputFunc
                outputFunc(output);

                // counter reset
                if (counter > 10) {
                    for (let i = 0; i < timers.length; i++) {
                        clearInterval(timers[i]);
                    }
                    outputFunc("<br>" + "Logging stopped.");
                }
            }
			
		})(printFunc); //IIFE
		
		function printFunc(output) {
			document.write(output + "<br>");
		}
		
		function startMeUp() {
			// add each of the timer references to the timers array
			// as part of invoking the log function following each interval
			timers.push(setInterval("log('Timer1')", 1000));
			timers.push(setInterval("log('Timer2')", 1200));
			timers.push(setInterval("log('Timer3')", 1700));
		}
		
		</script>
	</head>
	<body onload="startMeUp();">
	
	</body>
</html>
